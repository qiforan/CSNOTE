# 正则

正则模块`re`

```python
import re
# pattern string 匹配pattern开头的字符串
result = re.match("123","123abc")
print(result.group()
```

## 单字符匹配

|字符|功能|
|:----:|:----:|
|.|匹配任意1个字符（除了\n）|
|[] | 匹配[ ]中列举的字符|
|\d |匹配数字，即0-9|
|\D | 匹配非数字，即不是数字|
|\s |匹配空白，即 空格，tab键|
|\S | 匹配非空白 |
| \w|匹配单词字符，即a-z、A-Z、0-9、_|
|\W | 匹配非单词字符 |

## 匹配多个字符

|字符|功能|
|:----:|:----:|
| * |匹配前一个字符出现0次或者无限次，即可有可无|
| + |匹配前一个字符出现1次或者无限次，即至少有1次|
| ? |匹配前一个字符出现1次或者0次，即要么有1次，要么没有|
|{m}|匹配前一个字符出现m次|
|{m,n}|匹配前一个字符出现从m到n次|

## 匹配开头结尾

|字符|功能|
|:----:|:----:|
| ^ |匹配字符串开头|
| $ |匹配字符串结尾|

## 匹配分组

|字符|功能|
|:----:|:----:|
| \| |匹配左右任意一个表达式|
| (ab) |将括号中字符作为一个分组|
| \num |引用分组num匹配到的字符串|
| (?P\<name\>)|分组起别名|
| (?P=name) | 引用别名为name分组匹配到的字符串|

## 常用函数

### re.match(pattern,string,falgs)

判断字符串是否以给定的pattern开头,返回`match object`或`None`

说明：参数`falgs`：匹配模式(用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配)

### re.search(pattern,string,falgs)

扫描整个字符串并返回第一个成功的匹配

### re.compile 函数

用于编译正则表达式，生成一个正则表达式（Pattern）对象，供 `match()` 和 `search()`等函数使用

### Pattern.findall(string,[, pos[, endpos]])

在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果没有找到匹配的，则返回空列表

### `match object`方法

- `group()` 返回被 RE 匹配的字符串
- `start()` 返回匹配开始的位置
- `end()` 返回匹配结束的位置
- `span()`返回一个元组包含匹配 (开始,结束) 的位置

## 正则实例

- 匹配出，一个字符串第一个字母为大小字符，后面都是小写字母并且这些小写字母可有可无

```python
re.match("[A-Z][a-z]*",string)
```

- 匹配有效变量名

```python
re.match("[a-zA-Z_]+[\w]*",string)
```

- 匹配出，0到99之间的数字

```python
re.match("[1-9]\d?$|0$",string)
```

- 匹配8到20位的密码，可以是大小写英文字母、数字、下划线

```python
re.match("[A-Za-z0-9_]{8,20}",string)
```

- 匹配163、126、qq的邮箱地址

```python
re.match("[\w]{4,20}@(163|126|qq).com$", email)
```

- 匹配不是以4\7结尾的手机号(11位)

```python
re.match("1[\d]{9}[0-35-68-9]",string)
```

## 贪婪和非贪婪

默认是贪婪的，总是尝试匹配尽可能多的字符

非贪婪则相反，总是尝试匹配尽可能少的字符

在"*","?","+","{m,n}"后面加上？，使贪婪变成非贪婪。

## 原生字符串

Python中字符串前面加上 `r` 表示原生字符串

正则表达式里使用"\"作为转义字符，这就可能造成**反斜杠困扰**

假如你需要匹配文本中的字符"\"，那么使用编程语言表示的正则表达式里将需要**4个**反斜杠"\\"：前两个和后两个分别用于在编程语言里转义成反斜杠，转换成两个反斜杠后再在正则表达式里转义成一个反斜杠

## 参考：

1. [正则表达式实现与或非关系【推荐】](https://www.jb51.net/article/143137.htm)

2. [正则表达式的与或非](https://www.itdaan.com/blog/2010/11/03/7d81b73342a1bc80ce9f4ddce3e03264.html)