#include<bits/stdc++.h>

using namespace std;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
public:
    double champagneTower(int poured, int query_row, int query_glass) {
        dp.resize(query_row + 1, vector<double>(query_row + 1, -1));
        dp[0][0] = poured;
        helper(query_row,query_glass);
        return dp[query_row][query_glass] < 1 ? dp[query_row][query_glass] : 1.0;
    }

private:
    vector<vector<double>> dp;

    double helper(int i, int j) {
        if (dp[i][j] >= 0)
            return dp[i][j];
        double temp = 0;
        if(j > 0)
            temp += max(0.0,helper(i-1,j-1)-1);
        if(j < i)
            temp += max(0.0, helper(i-1,j)-1);
        return dp[i][j] = temp / 2.0;
    }
};
//leetcode submit region end(Prohibit modification and deletion)

int main() {
    Solution s;
    cout<< s.champagneTower(2,1,1);
    return 0;
}
//æˆ‘ä»¬æŠŠçŽ»ç’ƒæ¯æ‘†æˆé‡‘å­—å¡”çš„å½¢çŠ¶ï¼Œå…¶ä¸­ç¬¬ä¸€å±‚æœ‰1ä¸ªçŽ»ç’ƒæ¯ï¼Œç¬¬äºŒå±‚æœ‰2ä¸ªï¼Œä¾æ¬¡ç±»æŽ¨åˆ°ç¬¬100å±‚ï¼Œæ¯ä¸ªçŽ»ç’ƒæ¯(250ml)å°†ç››æœ‰é¦™æ§Ÿã€‚ 
//
// ä»Žé¡¶å±‚çš„ç¬¬ä¸€ä¸ªçŽ»ç’ƒæ¯å¼€å§‹å€¾å€’ä¸€äº›é¦™æ§Ÿï¼Œå½“é¡¶å±‚çš„æ¯å­æ»¡äº†ï¼Œä»»ä½•æº¢å‡ºçš„é¦™æ§Ÿéƒ½ä¼šç«‹åˆ»ç­‰æµé‡çš„æµå‘å·¦å³ä¸¤ä¾§çš„çŽ»ç’ƒæ¯ã€‚å½“å·¦å³ä¸¤è¾¹çš„æ¯å­ä¹Ÿæ»¡äº†ï¼Œå°±ä¼šç­‰æµé‡çš„æµå‘å®ƒä»¬å·¦
//å³ä¸¤è¾¹çš„æ¯å­ï¼Œä¾æ¬¡ç±»æŽ¨ã€‚ï¼ˆå½“æœ€åº•å±‚çš„çŽ»ç’ƒæ¯æ»¡äº†ï¼Œé¦™æ§Ÿä¼šæµåˆ°åœ°æ¿ä¸Šï¼‰ 
//
// ä¾‹å¦‚ï¼Œåœ¨å€¾å€’ä¸€æ¯é¦™æ§ŸåŽï¼Œæœ€é¡¶å±‚çš„çŽ»ç’ƒæ¯æ»¡äº†ã€‚å€¾å€’äº†ä¸¤æ¯é¦™æ§ŸåŽï¼Œç¬¬äºŒå±‚çš„ä¸¤ä¸ªçŽ»ç’ƒæ¯å„è‡ªç››æ”¾ä¸€åŠçš„é¦™æ§Ÿã€‚åœ¨å€’ä¸‰æ¯é¦™æ§ŸåŽï¼Œç¬¬äºŒå±‚çš„é¦™æ§Ÿæ»¡äº† - æ­¤æ—¶æ€»å…±æœ‰ä¸‰ä¸ªæ»¡
//çš„çŽ»ç’ƒæ¯ã€‚åœ¨å€’ç¬¬å››æ¯åŽï¼Œç¬¬ä¸‰å±‚ä¸­é—´çš„çŽ»ç’ƒæ¯ç››æ”¾äº†ä¸€åŠçš„é¦™æ§Ÿï¼Œä»–ä¸¤è¾¹çš„çŽ»ç’ƒæ¯å„è‡ªç››æ”¾äº†å››åˆ†ä¹‹ä¸€çš„é¦™æ§Ÿï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ 
//
// 
//
// çŽ°åœ¨å½“å€¾å€’äº†éžè´Ÿæ•´æ•°æ¯é¦™æ§ŸåŽï¼Œè¿”å›žç¬¬ i è¡Œ j ä¸ªçŽ»ç’ƒæ¯æ‰€ç››æ”¾çš„é¦™æ§Ÿå çŽ»ç’ƒæ¯å®¹ç§¯çš„æ¯”ä¾‹ï¼ˆi å’Œ jéƒ½ä»Ž0å¼€å§‹ï¼‰ã€‚ 
//
// 
//
// 
//ç¤ºä¾‹ 1:
//è¾“å…¥: poured(å€¾å€’é¦™æ§Ÿæ€»æ¯æ•°) = 1, query_glass(æ¯å­çš„ä½ç½®æ•°) = 1, query_row(è¡Œæ•°) = 1
//è¾“å‡º: 0.0
//è§£é‡Š: æˆ‘ä»¬åœ¨é¡¶å±‚ï¼ˆä¸‹æ ‡æ˜¯ï¼ˆ0ï¼Œ0ï¼‰ï¼‰å€’äº†ä¸€æ¯é¦™æ§ŸåŽï¼Œæ²¡æœ‰æº¢å‡ºï¼Œå› æ­¤æ‰€æœ‰åœ¨é¡¶å±‚ä»¥ä¸‹çš„çŽ»ç’ƒæ¯éƒ½æ˜¯ç©ºçš„ã€‚
//
//ç¤ºä¾‹ 2:
//è¾“å…¥: poured(å€¾å€’é¦™æ§Ÿæ€»æ¯æ•°) = 2, query_glass(æ¯å­çš„ä½ç½®æ•°) = 1, query_row(è¡Œæ•°) = 1
//è¾“å‡º: 0.5
//è§£é‡Š: æˆ‘ä»¬åœ¨é¡¶å±‚ï¼ˆä¸‹æ ‡æ˜¯ï¼ˆ0ï¼Œ0ï¼‰å€’äº†ä¸¤æ¯é¦™æ§ŸåŽï¼Œæœ‰ä¸€æ¯é‡çš„é¦™æ§Ÿå°†ä»Žé¡¶å±‚æº¢å‡ºï¼Œä½äºŽï¼ˆ1ï¼Œ0ï¼‰çš„çŽ»ç’ƒæ¯å’Œï¼ˆ1ï¼Œ1ï¼‰çš„çŽ»ç’ƒæ¯å¹³åˆ†äº†è¿™ä¸€æ¯é¦™æ§Ÿï¼Œæ‰€ä»¥æ¯ä¸ªçŽ»ç’ƒæ¯æœ‰
//ä¸€åŠçš„é¦™æ§Ÿã€‚
// 
//
// æ³¨æ„: 
//
// 
// poured çš„èŒƒå›´[0, 10 ^ 9]ã€‚ 
// query_glass å’Œquery_row çš„èŒƒå›´ [0, 99]ã€‚ 
// 
// Related Topics åŠ¨æ€è§„åˆ’ 
// ðŸ‘ 70 ðŸ‘Ž 0

